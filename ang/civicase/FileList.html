<div crm-ui-debug="filesByAct"></div>
<div civicase-util="caseutil"></div>
<form>
  <fieldset ng-disabled="block.check()">

<!--       <h4 class="act-date" ng-if="!caseutil.isSameDate(activity.activity_date_time, activities[$index-1].activity_date_time)">
        {{ CRM.utils.formatDate(activity.activity_date_time) }}<br/>
      </h4>

      <div class="act-feed-item status-type-{{ activity.status_type }}">
        <div class="act-feed-inner">

          <div civicase-activity-dot="activity"></div>

          <h4>
            <span class="act-subject">{{activity.type}}{{activity.subject ? ': ' : ''}}{{activity.subject}}</span>
          </h4>

          <p ng-bind-html="activity.details" style="max-height: 3em; overflow: hidden"></p>

          <div class="act-files">
            <div ng-repeat="file in filesByAct[activity.id]" class="clearfix">
              <a ng-href="{{file.url}}" title="Uploaded {{file.upload_date}}"><i class="fa {{file.icon}}"></i><span>{{file.name}}</span></a>

              <div class="btn-group btn-group-sm">
                <button
                  type="button"
                  class="btn btn-default-outline btn-xs dropdown-toggle"
                  data-toggle="dropdown"
                  title="{{ ts('Actions') }}"
                ><i class="crm-i fa-ellipsis-v"></i></button>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a title="{{ ts('Download') }}" href="{{ file.url }}">{{ts('Download')}}</a>
                  </li>
                  <li>
                    <a title="{{ ts('Delete') }}" ng-click="delete(activity, file)">{{ts('Delete')}}</a>
                  </li>
                </ul>
              </div>

              <p>{{file.description}}</p>

            </div>
          </div>

        </div>
      </div> -->

  <!-- Activity Feed -->
  <div class="civicase__activity-feed__list"  ng-show="apiCtrl.result.count">
    <div
      case-activity-card="activity"
      mode="long"
      refresh-on-checkbox-toggle="true"
      bulk-allowed="bulkAllowed"
      ng-click="viewActivity(activity.id, $event)"
      refresh-callback="refreshCase"
      ng-repeat="activity in activities"
      >
    </div>
  </div>
  <!-- End Activity Feed -->

  <!-- Loading Placeholder -->
  <div class="civicase__activity-feed__list" ng-if="apiCtrl.loading && !apiCtrl.result.count">
    <div class="civicase__activity-card civicase__activity-card--long" ng-repeat="i in [0,1,2]">
      <div class="panel panel-default">
        <div class="panel-body">
          <div class="civicase__activity-card-row" style="margin-bottom: 8px;">
            <div class="civicase__loading-placeholder__oneline" style="width: 0.8em; font-size: 24px; margin-right: 10px;"></div>
            <div class="civicase__loading-placeholder__oneline" style="width: 8em; font-size: 18px;"></div>
            <div class="civicase__activity__right-container civicase__loading-placeholder__oneline" style="width: 7em;"></div>
          </div>
          <div class="civicase__activity-card-row--file civicase__loading-placeholder__oneline" style="width: 8em; margin-bottom: 10px;"></div>
          <div class="civicase__activity-card-row--file civicase__loading-placeholder__oneline" style="width: 5em; margin-bottom: 10px;"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- End of Loading Placeholder -->

  <!-- No result HTML -->
  <div ng-hide="apiCtrl.loading || apiCtrl.result.count" class="civicase__panel-empty" ng-if="apiCtrl.loading && !apiCtrl.result.count">
    <i class="fa fa-file-o fa-big"></i>
    <div class="empty-label">{{ ts('No files found') }}</div>
  </div>
  <!-- End no result HTML -->
  </fieldset>
</form>
