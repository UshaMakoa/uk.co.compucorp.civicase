<span class="civicase__contact-card">
  <span uib-popover-template="'contact-popover.html'"
    popover-class="contact-popover-container"
    popover-append-to-body="true"
    popover-placement="auto bottom-left"
    popover-trigger="'mouseenter'">
    <span ng-if="!isAvatar" class="civicase__contact-name-container">
      <!-- Contact Icons -->
      <span ng-if="!noIcon">
        <i class="civicase__contact-icon material-icons" ng-if="getContactIconOf(contacts[0].contact_id) === 'Individual'">person</i>
        <i class="civicase__contact-icon material-icons" ng-if="getContactIconOf(contacts[0].contact_id) === 'Household'">home</i>
        <i class="civicase__contact-icon material-icons" ng-if="getContactIconOf(contacts[0].contact_id) === 'Organisation'">domain</i>
      </span>
      <!-- End - Contact Icons -->
      <!-- Contact Name -->
      <a
        class="civicase__contact-name"
        href="{{ url('civicrm/contact/view', {cid: contacts[0].contact_id}) }}"
        title="{{ ts('View Contact') }}">{{ contacts[0].display_name }}
      </a>
      <!-- End - Contact Name -->
    </span>
    <span ng-if="isAvatar">
      <!-- Contact Avatar -->
      <a
        href="{{ url('civicrm/contact/view', {cid: contacts[0].contact_id}) }}"
        class="civicase__contact-avatar crm_notification-badge"
        ng-class="{'civicase__contact-avatar--image': contacts[0].image_URL}"
        title="{{contacts[0].display_name}}">
        <img ng-if="contacts[0].image_URL" ng-src={{contacts[0].image_URL}}>
        <span ng-if="!contacts[0].image_URL">{{contacts[0].avatar}}</span>
      </a>
      <!-- End - Contact Avatar -->
    </span>
  </span>
  <!-- Additional Contact Dropdown -->
  <div
    ng-if="contacts.length > 1"
    ng-class="{'crm_notification-badge': isAvatar, 'civicase__contact-additional__container--avatar': isAvatar}"
    class="btn-group civicase__contact-additional__container"
    aria-haspopup="true"
    aria-expanded="false">
    <span ng-click="toggleDropdownVisibility($event)">+{{ contacts.length - 1 }}</span>
    <div
      ng-if="isPopupVisible"
      ng-class="{'civicase__contact-additional__arrow--avatar': isAvatar}"
      class="civicase__contact-additional__arrow">
    </div>
    <ul ng-if="isPopupVisible" class="dropdown-menu">
      <li ng-repeat="(index, contact) in contacts" ng-if="index">
        <a
          title="{{ ts('View Contact') }}"
          href="{{ url('civicrm/contact/view', {cid: contact.contact_id}) }}">
          <i class="civicase__contact-icon-additional material-icons" ng-if="getContactIconOf(contact.contact_id) === 'Individual'">person</i>
          <i class="civicase__contact-icon-additional material-icons" ng-if="getContactIconOf(contact.contact_id) === 'Household'">home</i>
          <i class="civicase__contact-icon-additional material-icons" ng-if="getContactIconOf(contact.contact_id) === 'Organisation'">domain</i>
          <span class="civicase__contact-name">{{ contact.display_name }}</span>
        </a>
      </li>
    </ul>
  </div>
  <!-- End - Additional Contact Dropdown -->
  <script type="text/ng-template" id="contact-popover.html">
    <div class="civicase__contact-popover">
      <div class="civicase__contact-popover__header">
        <h2>John Smith</h2>
        <hr />
      </div>
      <div class="civicase__contact-popover__column">
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Home Phone</strong></div>
          <div class="civicase__contact-popover__detail-value">09382 278 372</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Home Mobile</strong></div>
          <div class="civicase__contact-popover__detail-value"></div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Primary Address</strong></div>
          <div class="civicase__contact-popover__detail-value">251 Maple Lane</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>City</strong></div>
          <div class="civicase__contact-popover__detail-value">Kinney</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>State</strong></div>
          <div class="civicase__contact-popover__detail-value">MN</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Postal Code</strong></div>
          <div class="civicase__contact-popover__detail-value">37281</div>
        </div>
      </div>
      <div class="civicase__contact-popover__column">
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Primary Email</strong></div>
          <div class="civicase__contact-popover__detail-value">m.chambers@thisisanemail.comm.chambers@thisisanemail.com</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Groups</strong></div>
          <div class="civicase__contact-popover__detail-value">Summer Program</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Tags</strong></div>
          <div class="civicase__contact-popover__detail-value">Lorem</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Gender</strong></div>
          <div class="civicase__contact-popover__detail-value">Female</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Date of Birth</strong></div>
          <div class="civicase__contact-popover__detail-value">September 9th, 1968</div>
        </div>
      </div>
    </div>
  </script>
</span>
