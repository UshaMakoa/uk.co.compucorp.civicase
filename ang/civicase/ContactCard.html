<span class="civicase__contact-card">
  <span ng-if="!isAvatar" class="civicase__contact-name-container">
    <!-- Contact Icons -->
    <span ng-if="!noIcon">
      <civicase-popover
        popover-class="contact-popover-container"
        trigger-event="hover"
        on-open="initMainContact()">
        <civicase-popover-toggle-button>
          <i class="civicase__contact-icon material-icons" ng-if="getContactIconOf(contacts[0].contact_id) === 'Individual'">person</i>
          <i class="civicase__contact-icon material-icons" ng-if="getContactIconOf(contacts[0].contact_id) === 'Household'">home</i>
          <i class="civicase__contact-icon material-icons" ng-if="getContactIconOf(contacts[0].contact_id) === 'Organisation'">domain</i>
        </civicase-popover-toggle-button>
        <civicase-popover-content>
          <div ng-include="'contact-popover.html'"></div>
        </civicase-popover-content>
      </civicase-popover>
    </span>
    <!-- End - Contact Icons -->
    <!-- Contact Name -->
    <a
      class="civicase__contact-name"
      href="{{ url('civicrm/contact/view', {cid: contacts[0].contact_id}) }}"
      title="{{ ts('View Contact') }}">{{ contacts[0].display_name }}
    </a>
    <!-- End - Contact Name -->
  </span>
  <span ng-if="isAvatar">
    <!-- Contact Avatar -->
    <a
      href="{{ url('civicrm/contact/view', {cid: contacts[0].contact_id}) }}"
      class="civicase__contact-avatar crm_notification-badge"
      ng-class="{'civicase__contact-avatar--image': contacts[0].image_URL}"
      title="{{contacts[0].display_name}}">
      <img ng-if="contacts[0].image_URL" ng-src={{contacts[0].image_URL}}>
      <span ng-if="!contacts[0].image_URL">{{contacts[0].avatar}}</span>
    </a>
    <!-- End - Contact Avatar -->
  </span>
  <!-- Additional Contact Dropdown -->
  <civicase-popover popover-class="contact-popover-container">
    <civicase-popover-toggle-button ng-click="initMainContact($event)">
      <span>+{{ contacts.length - 1 }}</span>
    </civicase-popover-toggle-button>
    <civicase-popover-content>
      <div class="contact-popover-container" ng-include="'contact-popover.html'"></div>
    </civicase-popover-content>
  </civicase-popover>
  <!-- End - Additional Contact Dropdown -->

  <script type="text/ng-template" id="additional-contacts.html">
    <ul class="civicase__contact-additional__list">
      <li ng-repeat="(index, contact) in contacts" ng-if="index">
        <a
          title="{{ ts('View Contact') }}"
          href="{{ url('civicrm/contact/view', {cid: contact.contact_id}) }}">
          <i class="civicase__contact-icon-additional material-icons" ng-if="getContactIconOf(contact.contact_id) === 'Individual'">person</i>
          <i class="civicase__contact-icon-additional material-icons" ng-if="getContactIconOf(contact.contact_id) === 'Household'">home</i>
          <i class="civicase__contact-icon-additional material-icons" ng-if="getContactIconOf(contact.contact_id) === 'Organisation'">domain</i>
          <span class="civicase__contact-name-additional">{{ contact.display_name }}</span>
        </a>
      </li>
    </ul>
  </script>

  <script type="text/ng-template" id="contact-popover.html">
    <div class="civicase__contact-popover">
      <div class="civicase__contact-popover__header">
        <h2>{{mainContact.display_name}}</h2>
        <hr />
      </div>
      <div class="civicase__contact-popover__column">
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Home Phone</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.phone.phone}}</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Home Mobile</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.mobile.phone}}</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Primary Address</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.street_address}}</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>City</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.city}}</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>State</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.state_province}}</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Postal Code</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.postal_code}}</div>
        </div>
      </div>
      <div class="civicase__contact-popover__column">
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Primary Email</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.email}}</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Groups</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.groups}}</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Tags</strong></div>
          <div class="civicase__contact-popover__detail-value">
            <span ng-repeat="tag in mainContact['api.EntityTag.get'].values">
              <span civicase-tag="tag"></span>&nbsp;
            </span>
          </div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Gender</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.gender}}</div>
        </div>
        <div class="civicase__contact-popover__detail-group">
          <div class="civicase__contact-popover__detail-header"><strong>Date of Birth</strong></div>
          <div class="civicase__contact-popover__detail-value">{{mainContact.birth_date | date:'longDate'}}</div>
        </div>
      </div>
    </div>
  </script>

</span>
